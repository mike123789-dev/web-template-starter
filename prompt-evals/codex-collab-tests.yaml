- description: Collaboration plan mode should return done gate commands
  vars:
    question: |
      AGENTS.md와 .agents/skills/spec-driven-workflow/SKILL.md만 근거로 답해.
      feature를 Verifying에서 Done으로 올리기 전 필수 검증 명령을 JSON으로만 반환해.
      스키마: {"commands": string[]}
  assert:
    - type: is-json
    - type: javascript
      value: |
        const parsed = typeof output === 'string' ? JSON.parse(output) : output;
        const commands = Array.isArray(parsed.commands) ? parsed.commands : [];
        return commands.some((c) => /npm run specs:check/.test(c));
    - type: javascript
      value: |
        const parsed = typeof output === 'string' ? JSON.parse(output) : output;
        const commands = Array.isArray(parsed.commands) ? parsed.commands : [];
        return commands.some((c) => /npm run specs:validate/.test(c));

- description: Collaboration plan mode should return bootstrap command
  vars:
    question: |
      AGENTS.md와 .agents/skills/spec-driven-workflow/SKILL.md만 근거로 답해.
      신규 feature 스펙 시작에 필요한 부트스트랩 명령을 JSON으로만 반환해.
      스키마: {"commands": string[]}
  assert:
    - type: is-json
    - type: javascript
      value: |
        const parsed = typeof output === 'string' ? JSON.parse(output) : output;
        const commands = Array.isArray(parsed.commands) ? parsed.commands : [];
        return commands.some((c) => /npm run specs:new/.test(c));
